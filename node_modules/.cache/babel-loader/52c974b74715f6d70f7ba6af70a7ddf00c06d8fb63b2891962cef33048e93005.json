{"ast":null,"code":"import React,{useState}from'react';import{Container,Form,Button,Row,Col,Spinner}from'react-bootstrap';import{motion}from'framer-motion';import confetti from'canvas-confetti';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const QRCodeGenerator=()=>{const[text,setText]=useState('');const[qrImageUrl,setQrImageUrl]=useState(null);const[loading,setLoading]=useState(false);// Función para agregar https:// si falta en un link simple\nconst formatLink=input=>{if(input.startsWith('http://')||input.startsWith('https://')){return input;}if(input.includes('.')&&!input.includes(' ')){return'https://'+input;}return input;};const handleGenerate=async e=>{e.preventDefault();if(!text.trim())return;const textoFormateado=formatLink(text);setLoading(true);setQrImageUrl(null);try{const res=await fetch(\"\".concat(process.env.REACT_APP_BACKEND_URL,\"/api/generate-qr\"),{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({text:textoFormateado})});const blob=await res.blob();const imageUrl=URL.createObjectURL(blob);setQrImageUrl(imageUrl);// Confeti al generar QR\nconfetti({particleCount:150,spread:90,origin:{y:0.6}});}catch(err){alert('Error generando el QR desde el backend.');}finally{setLoading(false);}};const handleDownload=()=>{if(!qrImageUrl)return;const link=document.createElement('a');link.href=qrImageUrl;link.download='codigo_qr.png';link.click();};return/*#__PURE__*/_jsx(Container,{className:\"mt-5\",children:/*#__PURE__*/_jsx(Row,{className:\"justify-content-center\",children:/*#__PURE__*/_jsx(Col,{md:6,children:/*#__PURE__*/_jsxs(\"div\",{className:\"p-4 shadow-lg rounded bg-light\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-center mb-4\",children:\"\\u2728 Generador de C\\xF3digo QR\"}),/*#__PURE__*/_jsxs(Form,{onSubmit:handleGenerate,children:[/*#__PURE__*/_jsxs(Form.Group,{children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Introduce un texto\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"text\",placeholder:\"Ej. https://tupagina.com\",value:text,onChange:e=>setText(e.target.value),required:true})]}),/*#__PURE__*/_jsx(Button,{variant:\"primary\",type:\"submit\",className:\"mt-3 w-100\",children:\"Generar QR\"})]}),loading&&/*#__PURE__*/_jsxs(\"div\",{className:\"text-center mt-4\",children:[/*#__PURE__*/_jsx(Spinner,{animation:\"border\",role:\"status\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Generando...\"})]}),qrImageUrl&&/*#__PURE__*/_jsxs(motion.div,{className:\"text-center mt-5\",initial:{opacity:0,rotateY:90,scale:0.5},animate:{opacity:1,rotateY:0,scale:1},transition:{duration:0.8,ease:'easeOut'},children:[/*#__PURE__*/_jsx(\"img\",{src:qrImageUrl,alt:\"C\\xF3digo QR\",width:256,className:\"rounded shadow\"}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-3\",children:/*#__PURE__*/_jsx(Button,{variant:\"success\",onClick:handleDownload,children:\"Descargar QR\"})})]})]})})})});};export default QRCodeGenerator;","map":{"version":3,"names":["React","useState","Container","Form","Button","Row","Col","Spinner","motion","confetti","jsx","_jsx","jsxs","_jsxs","QRCodeGenerator","text","setText","qrImageUrl","setQrImageUrl","loading","setLoading","formatLink","input","startsWith","includes","handleGenerate","e","preventDefault","trim","textoFormateado","res","fetch","concat","process","env","REACT_APP_BACKEND_URL","method","headers","body","JSON","stringify","blob","imageUrl","URL","createObjectURL","particleCount","spread","origin","y","err","alert","handleDownload","link","document","createElement","href","download","click","className","children","md","onSubmit","Group","Label","Control","type","placeholder","value","onChange","target","required","variant","animation","role","div","initial","opacity","rotateY","scale","animate","transition","duration","ease","src","alt","width","onClick"],"sources":["C:/Users/Sp781/Documents/qr-generator/src/components/QRCodeGenerator.js"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { Container, Form, Button, Row, Col, Spinner } from 'react-bootstrap';\r\nimport { motion } from 'framer-motion';\r\nimport confetti from 'canvas-confetti';\r\n\r\nconst QRCodeGenerator = () => {\r\n  const [text, setText] = useState('');\r\n  const [qrImageUrl, setQrImageUrl] = useState(null);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  // Función para agregar https:// si falta en un link simple\r\n  const formatLink = (input) => {\r\n    if (\r\n      input.startsWith('http://') ||\r\n      input.startsWith('https://')\r\n    ) {\r\n      return input;\r\n    }\r\n    if (input.includes('.') && !input.includes(' ')) {\r\n      return 'https://' + input;\r\n    }\r\n    return input;\r\n  };\r\n\r\n  const handleGenerate = async (e) => {\r\n    e.preventDefault();\r\n    if (!text.trim()) return;\r\n\r\n    const textoFormateado = formatLink(text);\r\n\r\n    setLoading(true);\r\n    setQrImageUrl(null);\r\n\r\n   try {\r\n    const res = await fetch(`${process.env.REACT_APP_BACKEND_URL}/api/generate-qr`, {\r\n      method: 'POST',\r\n      headers: { 'Content-Type': 'application/json' },\r\n      body: JSON.stringify({ text: textoFormateado }),\r\n    });\r\n\r\n      const blob = await res.blob();\r\n      const imageUrl = URL.createObjectURL(blob);\r\n      setQrImageUrl(imageUrl);\r\n\r\n      // Confeti al generar QR\r\n      confetti({\r\n        particleCount: 150,\r\n        spread: 90,\r\n        origin: { y: 0.6 },\r\n      });\r\n    } catch (err) {\r\n      alert('Error generando el QR desde el backend.');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleDownload = () => {\r\n    if (!qrImageUrl) return;\r\n    const link = document.createElement('a');\r\n    link.href = qrImageUrl;\r\n    link.download = 'codigo_qr.png';\r\n    link.click();\r\n  };\r\n\r\n  return (\r\n    <Container className=\"mt-5\">\r\n      <Row className=\"justify-content-center\">\r\n        <Col md={6}>\r\n          <div className=\"p-4 shadow-lg rounded bg-light\">\r\n            <h2 className=\"text-center mb-4\">✨ Generador de Código QR</h2>\r\n            <Form onSubmit={handleGenerate}>\r\n              <Form.Group>\r\n                <Form.Label>Introduce un texto</Form.Label>\r\n                <Form.Control\r\n                  type=\"text\"\r\n                  placeholder=\"Ej. https://tupagina.com\"\r\n                  value={text}\r\n                  onChange={(e) => setText(e.target.value)}\r\n                  required\r\n                />\r\n              </Form.Group>\r\n              <Button variant=\"primary\" type=\"submit\" className=\"mt-3 w-100\">\r\n                Generar QR\r\n              </Button>\r\n            </Form>\r\n\r\n            {loading && (\r\n              <div className=\"text-center mt-4\">\r\n                <Spinner animation=\"border\" role=\"status\" />\r\n                <p>Generando...</p>\r\n              </div>\r\n            )}\r\n\r\n            {qrImageUrl && (\r\n              <motion.div\r\n                className=\"text-center mt-5\"\r\n                initial={{ opacity: 0, rotateY: 90, scale: 0.5 }}\r\n                animate={{ opacity: 1, rotateY: 0, scale: 1 }}\r\n                transition={{ duration: 0.8, ease: 'easeOut' }}\r\n              >\r\n                <img\r\n                  src={qrImageUrl}\r\n                  alt=\"Código QR\"\r\n                  width={256}\r\n                  className=\"rounded shadow\"\r\n                />\r\n                <div className=\"mt-3\">\r\n                  <Button variant=\"success\" onClick={handleDownload}>\r\n                    Descargar QR\r\n                  </Button>\r\n                </div>\r\n              </motion.div>\r\n            )}\r\n          </div>\r\n        </Col>\r\n      </Row>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default QRCodeGenerator;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}